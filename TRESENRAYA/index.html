<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="author" content="Jhamil Vargas Arcienega">
    <meta name="keywords" content="Tres en Raya, Tic Tac Toe, Juego, HTML, CSS, JavaScript, Firebase, Registro, Inicio de Sesi칩n, Estad칤sticas, Multiplayer">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Panel principal del juego Tres en Raya">
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='80' font-size='80'>游꿡</text></svg>">
    <title>Tres en Raya - Panel Principal</title>
    
    <!-- Firebase SDK (v8.10.0) - Versi칩n compatible con sintaxis antigua -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>游꿡 Tres en Raya</h1>
            <p class="subtitle">춰Bienvenido al mejor juego de Tres en Raya!</p>
        </header>

        <main>
            <div class="game-card">
                <div class="game-icon">仇꺽솃</div>
                <h2>춰Comienza a Jugar!</h2>
                <p>Disfruta del cl치sico juego de Tres en Raya con m칰ltiples modos de juego y estad칤sticas en tiempo real.</p>
                
                <div class="features">
                    <div class="feature">
                        <span class="feature-icon">游</span>
                        <span>IA Inteligente</span>
                    </div>
                    <div class="feature">
                        <span class="feature-icon">游논</span>
                        <span>Multijugador</span>
                    </div>
                    <div class="feature">
                        <span class="feature-icon">游깷</span>
                        <span>Juego en L칤nea</span>
                    </div>
                    <div class="feature">
                        <span class="feature-icon">游늵</span>
                        <span>Estad칤sticas</span>
                    </div>
                </div>

                <div class="game-options">
                    <a href="registration.html" class="launch-btn btn-green">
                        <span class="btn-icon">游닇</span>
                        <span class="btn-text">Registrarse</span>
                    </a>

                    <a href="login.html" class="launch-btn btn-blue">
                        <span class="btn-icon">游댐</span>
                        <span class="btn-text">Iniciar Sesi칩n</span>
                    </a>

                    <a href="catalog.html" class="launch-btn btn-purple">
                        <span class="btn-icon">游꿡</span>
                        <span class="btn-text">Jugar como Invitado</span>
                    </a>
                </div>

                <div class="instructions">
                    <p><strong>Caracter칤sticas del juego:</strong></p>
                    <ul>
                        <li>游꿢 3 niveles de dificultad contra la CPU</li>
                        <li>游논 Modo de 2 jugadores local</li>
                        <li>游깷 Juego en l칤nea con salas compartibles</li>
                        <li>游늵 Estad칤sticas guardadas en la nube</li>
                        <li>游끥 Tabla de l칤deres global</li>
                    </ul>
                </div>
            </div>
        </main>

        <footer>
            <p>Desarrollado con 仇벒잺 | Elige una opci칩n para comenzar a jugar</p>
        </footer>
    </div>

    <script>
        // Mostrar opciones apropiadas seg칰n el estado de autenticaci칩n
        document.addEventListener('DOMContentLoaded', () => {
            // Esperar a que Firebase se inicialice desde game.js
            setTimeout(() => {
                if (window.firebase && window.auth) {
                    // Verificar si el usuario ya est치 autenticado
                    window.auth.onAuthStateChanged((user) => {
                        if (user) {
                            // Si el usuario est치 autenticado, mostrar mensaje y opci칩n para ir al cat치logo
                            const subtitle = document.querySelector('.subtitle');
                            if (subtitle) {
                                subtitle.innerHTML = '춰Bienvenido de vuelta! Ya tienes una sesi칩n activa.';
                            }
                            
                            // Agregar bot칩n para ir al cat치logo
                            const gameOptions = document.querySelector('.game-options');
                            if (gameOptions) {
                                gameOptions.innerHTML = `
                                    <a href="catalog.html" class="launch-btn" style="background-color: #28a745;">
                                        <span class="btn-icon">游꿡</span>
                                        <span class="btn-text">Continuar Jugando</span>
                                    </a>
                                    <button onclick="logoutAndShowOptions()" class="launch-btn" style="background-color: #dc3545;">
                                        <span class="btn-icon">游뛁</span>
                                        <span class="btn-text">Cerrar Sesi칩n</span>
                                    </button>
                                `;
                            }
                        }
                    });
                }
            }, 100);
        });

        // Funci칩n para cerrar sesi칩n y mostrar opciones de registro
        function logoutAndShowOptions() {
            if (window.auth) {
                window.auth.signOut().then(() => {
                    // Recargar la p치gina para mostrar las opciones de registro
                    window.location.reload();
                }).catch(error => {
                    console.error('Error al cerrar sesi칩n:', error);
                    alert('Error al cerrar sesi칩n. Recarga la p치gina manualmente.');
                });
            }
        }
    </script>
    <script src="game.js"></script>
</body>
</html>